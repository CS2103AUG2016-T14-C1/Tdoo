# A0144061U
###### /src/main/java/seedu/todoList/commons/events/storage/StorageLocationChangedEvent.java
``` java
/**
 * Indicates to observers when the location of the storage is changed
 */
public class StorageLocationChangedEvent extends BaseEvent {

    public String newDirectory;

    public StorageLocationChangedEvent(String directory) {
        this.newDirectory = directory;
    }
    
    public String getNewDirectory() {
    	return newDirectory;
    }

    @Override
    public String toString(){
        return "New Location: " + this.newDirectory;
    }

}
```
###### /src/main/java/seedu/todoList/commons/events/model/TodoListChangedEvent.java
``` java
/** Indicates the TodoList in the model has changed*/
public class TodoListChangedEvent extends BaseEvent {

    public final ReadOnlyTaskList data;

    public TodoListChangedEvent(ReadOnlyTaskList data){
        this.data = data;
    }

    @Override
    public String toString() {
        return "number of tasks " + data.getTaskList().size();
    }
}
```
###### /src/main/java/seedu/todoList/commons/events/model/EventListChangedEvent.java
``` java
/** Indicates the TodoList in the model has changed*/
public class EventListChangedEvent extends BaseEvent {

    public final ReadOnlyTaskList data;

    public EventListChangedEvent(ReadOnlyTaskList data){
        this.data = data;
    }

    @Override
    public String toString() {
        return "number of tasks " + data.getTaskList().size();
    }
}
```
###### /src/main/java/seedu/todoList/commons/events/model/DeadlineListChangedEvent.java
``` java
/** Indicates the TodoList in the model has changed*/
public class DeadlineListChangedEvent extends BaseEvent {

    public final ReadOnlyTaskList data;

    public DeadlineListChangedEvent(ReadOnlyTaskList data){
        this.data = data;
    }

    @Override
    public String toString() {
        return "number of tasks " + data.getTaskList().size();
    }
}
```
###### /src/main/java/seedu/todoList/ui/MainWindow.java
``` java
    void fillInnerParts() {
    	assert primaryStage != null;
    	assert getTodoListPlaceholder() != null;
    	assert logic.getFilteredTodoList() != null;
        todoListPanel = TodoListPanel.load(primaryStage, getTodoListPlaceholder(), logic.getFilteredTodoList());
        eventListPanel = EventListPanel.load(primaryStage, getEventListPlaceholder(), logic.getFilteredEventList());
        deadlineListPanel = DeadlineListPanel.load(primaryStage, getDeadlineListPlaceholder(), logic.getFilteredDeadlineList());
        resultDisplay = ResultDisplay.load(primaryStage, getResultDisplayPlaceholder());
        statusBarFooter = StatusBarFooter.load(primaryStage, getStatusbarPlaceholder(), config.getTodoListFilePath());
        commandBox = CommandBox.load(primaryStage, getCommandBoxPlaceholder(), resultDisplay, logic);
    }

    private AnchorPane getCommandBoxPlaceholder() {
        return commandBoxPlaceholder;
    }

    private AnchorPane getStatusbarPlaceholder() {
        return statusbarPlaceholder;
    }

    private AnchorPane getResultDisplayPlaceholder() {
        return resultDisplayPlaceholder;
    }

    public AnchorPane getTodoListPlaceholder() {
        return todoListPanelPlaceholder;
    }
    
    public AnchorPane getEventListPlaceholder() {
        return eventListPanelPlaceholder;
    }
    
    public AnchorPane getDeadlineListPlaceholder() {
        return deadlineListPanelPlaceholder;
    }

    public void hide() {
        primaryStage.hide();
    }

    private void setTitle(String appTitle) {
        primaryStage.setTitle(appTitle);
    }

    /**
     * Sets the default size based on user preferences.
     */
    protected void setWindowDefaultSize(UserPrefs prefs) {
        primaryStage.setHeight(prefs.getGuiSettings().getWindowHeight());
        primaryStage.setWidth(prefs.getGuiSettings().getWindowWidth());
        if (prefs.getGuiSettings().getWindowCoordinates() != null) {
            primaryStage.setX(prefs.getGuiSettings().getWindowCoordinates().getX());
            primaryStage.setY(prefs.getGuiSettings().getWindowCoordinates().getY());
        }
    }

    private void setWindowMinSize() {
        primaryStage.setMinHeight(MIN_HEIGHT);
        primaryStage.setMinWidth(MIN_WIDTH);
    }

    /**
     * Returns the current size and the position of the main Window.
     */
    public GuiSettings getCurrentGuiSetting() {
        return new GuiSettings(primaryStage.getWidth(), primaryStage.getHeight(),
                (int) primaryStage.getX(), (int) primaryStage.getY());
    }

    @FXML
    public void handleHelp() {
        HelpWindow helpWindow = HelpWindow.load(primaryStage);
        helpWindow.show();
    }

    public void show() {
        primaryStage.show();
    }

    /**
     * Closes the application.
     */
    @FXML
    private void handleExit() {
        raise(new ExitAppRequestEvent());
    }

```
###### /src/main/java/seedu/todoList/ui/MainWindow.java
``` java
    public TodoListPanel getTaskListPanel() {
        return this.todoListPanel;
    }
    
```
###### /src/main/java/seedu/todoList/ui/MainWindow.java
``` java
    public EventListPanel getEventListPanel() {
        return this.eventListPanel;
    }
    
```
###### /src/main/java/seedu/todoList/ui/MainWindow.java
``` java
    public DeadlineListPanel getDeadlineListPanel() {
        return this.deadlineListPanel;
    }
}
```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void changeStorage(String path) throws IllegalValueException {
    	raise(new StorageLocationChangedEvent(path));
    }


    // ================ TodoList methods ==============================
    
```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public String getTodoListFilePath() {
        return todoListStorage.getTaskListFilePath();
    }
    
```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void setTodoListFilePath(String todoListFilePath) throws IllegalValueException {
        config.setTodoListFilePath(todoListFilePath);
        todoListStorage.setTaskListFilePath(todoListFilePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readTodoList() throws DataConversionException, IOException {
        return readTodoList(todoListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readTodoList(String filePath) throws DataConversionException, IOException {
        logger.fine("Attempting to read data from file: " + filePath);
        return todoListStorage.readTaskList(filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveTodoList(ReadOnlyTaskList TodoList) throws IOException {
        saveTodoList(TodoList, todoListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveTodoList(ReadOnlyTaskList TodoList, String filePath) throws IOException {
        logger.fine("Attempting to write to data file: " + filePath);
        todoListStorage.saveTaskList(TodoList, filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    @Subscribe
    public void handleTodoListChangedEvent(TodoListChangedEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event, "Local data changed, saving to file"));
        try {
            saveTodoList(event.data);
        } catch (IOException e) {
            raise(new DataSavingExceptionEvent(e));
        }
    }
    
 // ================ EventList methods ==============================

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public String getEventListFilePath() {
        return eventListStorage.getTaskListFilePath();
    }
    
```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void setEventListFilePath(String eventListFilePath) throws IllegalValueException {
        config.setEventListFilePath(eventListFilePath);
        eventListStorage.setTaskListFilePath(eventListFilePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readEventList() throws DataConversionException, IOException {
        return readEventList(eventListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readEventList(String filePath) throws DataConversionException, IOException {
        logger.fine("Attempting to read data from file: " + filePath);
        return eventListStorage.readTaskList(filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveEventList(ReadOnlyTaskList eventList) throws IOException {
        saveEventList(eventList, eventListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveEventList(ReadOnlyTaskList eventList, String filePath) throws IOException {
        logger.fine("Attempting to write to data file: " + filePath);
        eventListStorage.saveTaskList(eventList, filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    @Subscribe
    public void handleEventListChangedEvent(EventListChangedEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event, "Local data changed, saving to file"));
        try {
            saveEventList(event.data);
        } catch (IOException e) {
            raise(new DataSavingExceptionEvent(e));
        }
    }
    
 // ================ DeadlineList methods ==============================

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public String getDeadlineListFilePath() {
        return deadlineListStorage.getTaskListFilePath();
    }
    
```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void setDeadlineListFilePath(String deadlineListFilePath) throws IllegalValueException {
        config.setDeadlineListFilePath(deadlineListFilePath);
        deadlineListStorage.setTaskListFilePath(deadlineListFilePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readDeadlineList() throws DataConversionException, IOException {
        return readTodoList(deadlineListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public Optional<ReadOnlyTaskList> readDeadlineList(String filePath) throws DataConversionException, IOException {
        logger.fine("Attempting to read data from file: " + filePath);
        return deadlineListStorage.readTaskList(filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveDeadlineList(ReadOnlyTaskList taskList) throws IOException {
        saveDeadlineList(taskList, deadlineListStorage.getTaskListFilePath());
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    public void saveDeadlineList(ReadOnlyTaskList taskList, String filePath) throws IOException {
        logger.fine("Attempting to write to data file: " + filePath);
        deadlineListStorage.saveTaskList(taskList, filePath);
    }

```
###### /src/main/java/seedu/todoList/storage/StorageManager.java
``` java
    @Override
    @Subscribe
    public void handleDeadlineListChangedEvent(DeadlineListChangedEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event, "Local data changed, saving to file"));
        try {
            saveDeadlineList(event.data);
        } catch (IOException e) {
            raise(new DataSavingExceptionEvent(e));
        }
    }
}
```
###### /src/main/java/seedu/todoList/logic/LogicManager.java
``` java
    @Override
    public ObservableList<ReadOnlyTask> getFilteredTodoList() {
        return model.getFilteredTodoList();
    }
    
```
###### /src/main/java/seedu/todoList/logic/LogicManager.java
``` java
    @Override
    public ObservableList<ReadOnlyTask> getFilteredEventList() {
        return model.getFilteredEventList();
    }
    
```
###### /src/main/java/seedu/todoList/logic/LogicManager.java
``` java
    @Override
    public ObservableList<ReadOnlyTask> getFilteredDeadlineList() {
        return model.getFilteredDeadlineList();
    }
}
```
###### /src/main/java/seedu/todoList/logic/commands/UndoCommand.java
``` java
/**
 * Undo the most recent command by the user.
 */
public class UndoCommand extends Command {

    public static final String COMMAND_WORD = "undo";

    public static final String MESSAGE_USAGE = COMMAND_WORD
    		+ ": Undo the latest command. If there is no previous command, nothing will happen.\n"
            + "Example: " + COMMAND_WORD;

    public static final String MESSAGE_UNDO_SUCCESS = "Undone the latest task.";
    public static final String MESSAGE_UNDO_FAIL = "There was no undoable command made before.";

    public UndoCommand() {}

    @Override
    public CommandResult execute() {
        try {
            model.undoLatestCommand();
        } catch (EmptyStackException e) {
        	return new CommandResult(MESSAGE_UNDO_FAIL);
        }

        return new CommandResult(MESSAGE_UNDO_SUCCESS);
    }

}
```
###### /src/main/java/seedu/todoList/logic/commands/DeleteCommand.java
``` java
    @Override
    public CommandResult execute() {
    	if(this.targetIndex != -1 && this.taskToDelete == null) {
	    	UnmodifiableObservableList<ReadOnlyTask> lastShownList = null;
	    	switch (dataType) {
	    		case "todo":
	    			lastShownList = model.getFilteredTodoList();
	    			break;
	    		case "event":
	    			lastShownList = model.getFilteredEventList();
	    			break;
	    		case "deadline":
	    			lastShownList = model.getFilteredDeadlineList();
	    	}
	        if (lastShownList.size() < targetIndex) {
	            indicateAttemptToExecuteIncorrectCommand();
	            return new CommandResult(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
	        }
	
	        taskToDelete = lastShownList.get(targetIndex - 1);
    	}
        try {
        	assert(taskToDelete != null);
            model.deleteTask(taskToDelete, dataType);
        } catch (TaskNotFoundException pnfe) {
            assert false : "The target task cannot be missing";
        }

        return new CommandResult(String.format(MESSAGE_DELETE_TASK_SUCCESS, taskToDelete));
    }

}
```
###### /src/main/java/seedu/todoList/logic/commands/ClearCommand.java
``` java
    @Override
    public CommandResult execute() {
        assert model != null;
        switch(dataType) {
        	case "todo":
        		model.resetTodoListData();
                return new CommandResult(TODO_MESSAGE_SUCCESS);
        	case "event":
        		model.resetEventListData();
                return new CommandResult(EVENT_MESSAGE_SUCCESS);
        	case "deadline":
        		model.resetDeadlineListData();
                return new CommandResult(DEADLINE_MESSAGE_SUCCESS);
        }
        return new CommandResult(INVALID_TYPE);
    }
}
```
###### /src/main/java/seedu/todoList/logic/commands/RestoreListCommand.java
``` java
    @Override
    public CommandResult execute() {
        assert model != null;
        switch(dataType) {
        	case "todo":
        		model.restoreTodoListData();
                return new CommandResult(TODO_MESSAGE_SUCCESS);
        	case "event":
        		model.restoreEventListData();
                return new CommandResult(EVENT_MESSAGE_SUCCESS);
        	case "deadline":
        		model.restoreDeadlineListData();
                return new CommandResult(DEADLINE_MESSAGE_SUCCESS);
        }
        return new CommandResult(INVALID_TYPE);
    }
}
```
###### /src/main/java/seedu/todoList/logic/commands/StorageCommand.java
``` java
/**
 * Change the storage directory of the application
 */
public class StorageCommand extends Command {

    public static final String COMMAND_WORD = "storage";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Change the storage directory of the app.\n"
            + "Parameters: DIRECTORY"
            + "Example: " + COMMAND_WORD
            + " /Documents/ShardFolder/TdooData";

    public static final String MESSAGE_SUCCESS = "Storage location changed: %1$s";
    public static final String INVALID_VALUE = "Invalid value";
    
    final String newDirectory;

    /**
     * Change storage directory
     * Convenience constructor using raw values.
     * @throws IllegalValueException if any of the raw values are invalid
     */
    public StorageCommand(String directory) {
           // throws IllegalValueException {
        this.newDirectory = directory;
    }

    @Override
    public CommandResult execute() {
        try {
        	storage.changeStorage(newDirectory);
            return new CommandResult(String.format(MESSAGE_SUCCESS, this.newDirectory));
        } catch (IllegalValueException ive) {
        	return new CommandResult(INVALID_VALUE);
        }

    }
}
```
###### /src/main/java/seedu/todoList/MainApp.java
``` java
    private Model initModelManager(Storage storage, UserPrefs userPrefs) {
        Optional<ReadOnlyTaskList> TodoListOptional;
        ReadOnlyTaskList initialTodoListData;
        Optional<ReadOnlyTaskList> EventListOptional;
        ReadOnlyTaskList initialEventListData;
        Optional<ReadOnlyTaskList> DeadlineListOptional;
        ReadOnlyTaskList initialDeadlineListData;
        
        try {
            TodoListOptional = storage.readTodoList();
            if(!TodoListOptional.isPresent()){
                logger.info("Data file not found. Will be starting with an empty TodoList");
            }
            initialTodoListData = TodoListOptional.orElse(new TaskList());
            
            EventListOptional = storage.readEventList();
            if(!EventListOptional.isPresent()){
                logger.info("Data file not found. Will be starting with an empty EventList");
            }
            initialEventListData = EventListOptional.orElse(new TaskList());
            
            DeadlineListOptional = storage.readDeadlineList();
            if(!DeadlineListOptional.isPresent()){
                logger.info("Data file not found. Will be starting with an empty DeadlineList");
            }
            initialDeadlineListData = DeadlineListOptional.orElse(new TaskList());
            
        } catch (DataConversionException e) {
            logger.warning("Data file not in the correct format. Will be starting with an empty TodoList");
            initialTodoListData = new TaskList();
            initialEventListData = new TaskList();
            initialDeadlineListData = new TaskList();
        } catch (IOException e) {
            logger.warning("Problem while reading from the file. . Will be starting with an empty TodoList");
            initialTodoListData = new TaskList();
            initialEventListData = new TaskList();
            initialDeadlineListData = new TaskList();
        }

        return new ModelManager(initialTodoListData, initialEventListData, initialDeadlineListData, userPrefs);
    }

    private void initLogging(Config config) {
        LogsCenter.init(config);
    }

    protected Config initConfig(String configFilePath) {
        Config initializedConfig;
        String configFilePathUsed;

        configFilePathUsed = Config.DEFAULT_CONFIG_FILE;

        if(configFilePath != null) {
            logger.info("Custom Config file specified " + configFilePath);
            configFilePathUsed = configFilePath;
        }

        logger.info("Using config file : " + configFilePathUsed);

        try {
            Optional<Config> configOptional = ConfigUtil.readConfig(configFilePathUsed);
            initializedConfig = configOptional.orElse(new Config());
        } catch (DataConversionException e) {
            logger.warning("Config file at " + configFilePathUsed + " is not in the correct format. " +
                    "Using default config properties");
            initializedConfig = new Config();
        }

        //Update config file in case it was missing to begin with or there are new/unused fields
        try {
            ConfigUtil.saveConfig(initializedConfig, configFilePathUsed);
        } catch (IOException e) {
            logger.warning("Failed to save config file : " + StringUtil.getDetails(e));
        }
        return initializedConfig;
    }

    protected UserPrefs initPrefs(Config config) {
        assert config != null;

        String prefsFilePath = config.getUserPrefsFilePath();
        logger.info("Using prefs file : " + prefsFilePath);

        UserPrefs initializedPrefs;
        try {
            Optional<UserPrefs> prefsOptional = storage.readUserPrefs();
            initializedPrefs = prefsOptional.orElse(new UserPrefs());
        } catch (DataConversionException e) {
            logger.warning("UserPrefs file at " + prefsFilePath + " is not in the correct format. " +
                    "Using default user prefs");
            initializedPrefs = new UserPrefs();
        } catch (IOException e) {
            logger.warning("Problem while reading from the file. . Will be starting with an empty TodoList");
            initializedPrefs = new UserPrefs();
        }

        //Update prefs file in case it was missing to begin with or there are new/unused fields
        try {
            storage.saveUserPrefs(initializedPrefs);
        } catch (IOException e) {
            logger.warning("Failed to save config file : " + StringUtil.getDetails(e));
        }

        return initializedPrefs;
    }

    private void initEventsCenter() {
        EventsCenter.getInstance().registerHandler(this);
    }

    @Override
    public void start(Stage primaryStage) {
        logger.info("Starting TodoList " + MainApp.VERSION);
        ui.start(primaryStage);
    }

    @Override
    public void stop() {
        logger.info("============================ [ Stopping Todo Book ] =============================");
        ui.stop();
        try {
            storage.saveUserPrefs(userPrefs);
        } catch (IOException e) {
            logger.severe("Failed to save preferences " + StringUtil.getDetails(e));
        }
        Platform.exit();
        System.exit(0);
    }

    @Subscribe
    public void handleExitAppRequestEvent(ExitAppRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        this.stop();
    }
    
```
###### /src/main/java/seedu/todoList/MainApp.java
``` java
    /*
     * Stop and restart the app with new storage file
     */
    @Subscribe
    private void handleStorageLocationChangedEvent (StorageLocationChangedEvent event) throws Exception {
    	logger.info(LogsCenter.getEventHandlingLogMessage(event));
    	
    	// ui.stop();
    	
    	logger.info("=============================[ Reinitializing TodoList ]===========================");
        super.init();
        
        String newDirectory = event.getNewDirectory();
        Config changedConfig = new Config(newDirectory);
        ConfigUtil.saveConfig(changedConfig, Config.DEFAULT_CONFIG_FILE);

        this.stop();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```
###### /src/main/java/seedu/todoList/model/task/UniqueTaskList.java
``` java
    /**
     * Removes all task from the list.
     */
    public void removeAll() {
       internalList.remove(0, internalList.size());
    }
    
```
###### /src/main/java/seedu/todoList/model/task/UniqueTaskList.java
``` java
    /**
     * Replace all task from another list.
     */
    public void setAll(UniqueTaskList taskList) {
       internalList.setAll(taskList.getInternalList());
    }

    public ObservableList<Task> getInternalList() {
        return internalList;
    }

    @Override
    public Iterator<Task> iterator() {
        return internalList.iterator();
    }

    @Override
    public boolean equals(Object other) {
        return other == this // short circuit if same object
                || (other instanceof UniqueTaskList // instanceof handles nulls
                && this.internalList.equals(
                ((UniqueTaskList) other).internalList));
    }

    @Override
    public int hashCode() {
        return internalList.hashCode();
    }
    
    /**
     * Marks the equivalent task as done.
     *
     * @throws TaskNotFoundException if no such task could be found in the list.
     */
    public boolean doneTask(ReadOnlyTask key) throws UniqueTaskList.TaskNotFoundException {
    	assert key != null;
    	final boolean taskUpdated = internalList.contains(key);
        if (taskUpdated) {
        	internalList.get(internalList.indexOf(key)).setDone("true");
        	internalList.set(internalList.indexOf(key), internalList.get(internalList.indexOf(key)));
            return taskUpdated;
        } else {
            throw new UniqueTaskList.TaskNotFoundException();
        }
    }
    
    /**
     * Marks the equivalent task as undone.
     *
     * @throws TaskNotFoundException if no such task could be found in the list.
     */
    public boolean undoneTask(ReadOnlyTask key) throws UniqueTaskList.TaskNotFoundException {
        assert key != null;
        final boolean taskUpdated = internalList.contains(key);
        if (taskUpdated) {
            internalList.get(internalList.indexOf(key)).setDone("false");
            internalList.set(internalList.indexOf(key), internalList.get(internalList.indexOf(key)));
            return taskUpdated;
        } else {
            throw new UniqueTaskList.TaskNotFoundException();
        }
    }
}
```
###### /src/main/java/seedu/todoList/model/TaskList.java
``` java
    public void resetData(Collection<? extends ReadOnlyTask> newTasks) {
    	Object[] typeCheck = newTasks.toArray();
    	if(typeCheck.length == 0) {
    		tasks = new UniqueTaskList();
    	}
    	else if(typeCheck[0] instanceof Todo) {
    		setTasks(newTasks.stream().map(Todo::new).collect(Collectors.toList()));
    	}
    	else if(typeCheck[0] instanceof Event) {
    		setTasks(newTasks.stream().map(Event::new).collect(Collectors.toList()));
    	}
    	else if(typeCheck[0] instanceof Deadline) {
    		setTasks(newTasks.stream().map(Deadline::new).collect(Collectors.toList()));
    	}
    }
    
    public void resetData(ReadOnlyTaskList newData) {
        resetData(newData.getTaskList());
    }
    
```
###### /src/main/java/seedu/todoList/model/TaskList.java
``` java
    public void resetData() {
    	backupStack.push(new UniqueTaskList(tasks));
    	tasks.removeAll();
    }
    
```
###### /src/main/java/seedu/todoList/model/TaskList.java
``` java
    public void restoreData() {
    	UniqueTaskList backup = backupStack.pop();
    	tasks.setAll(backup);
    }
    

//// task-level operations

    /**
     * Adds a task to the TodoList.
     *
     * @throws UniqueTaskList.DuplicatetaskException if an equivalent task already exists.
     */
    public void addTask(Task p) throws UniqueTaskList.DuplicatetaskException {
        tasks.add(p);
    }
    
    /**
     * Edit a task to the TodoList.
     *
     * @throws UniqueTaskList.DuplicatetaskException if an equivalent task already exists.
     */
    public void editTask(Task p) throws UniqueTaskList.DuplicatetaskException {
        tasks.edit(p);
        
    }

    public boolean removeTask(ReadOnlyTask key) throws UniqueTaskList.TaskNotFoundException {
        if (tasks.remove(key)) {
            return true;
        } else {
            throw new UniqueTaskList.TaskNotFoundException();
        }
    }

    public boolean doneTask(ReadOnlyTask target) throws UniqueTaskList.TaskNotFoundException {
    	if(tasks.doneTask(target)){
    		return true;
    	} else {
    		throw new UniqueTaskList.TaskNotFoundException();
    	}
    }
    
    public boolean undoneTask(ReadOnlyTask target) throws UniqueTaskList.TaskNotFoundException {
        if(tasks.undoneTask(target)){
            return true;
        } else {
            throw new UniqueTaskList.TaskNotFoundException();
        }
    }
//// util methods

    @Override
    public String toString() {
        return tasks.getInternalList().size() + " tasks";
        // TODO: refine later
    }

    @Override
    public List<ReadOnlyTask> getTaskList() {
        return Collections.unmodifiableList(tasks.getInternalList());
    }

    @Override
    public UniqueTaskList getUniqueTaskList() {
        return this.tasks;
    }

    @Override
    public boolean equals(Object other) {
        return other == this // short circuit if same object
                || (other instanceof TaskList // instanceof handles nulls
                && this.tasks.equals(((TaskList) other).tasks));
    }

}
```
###### /src/main/java/seedu/todoList/model/Undoer.java
``` java
public class Undoer {
	
	private final Stack<Command> undoStack;
	private final Model model;
	
	public Undoer (Model model) {
		this.model = model;
		undoStack = new Stack<Command>();
	}
	
	/*
	 * Push a delete command that undo this add command
	 */
	public void prepareUndoAdd(ReadOnlyTask task, String dataType) {
		undoStack.push(new DeleteCommand(task, dataType));
	}
	
	/*
	 * Push an add command that undo this delete command
	 */
	public void prepareUndoDelete(ReadOnlyTask restoredTask) {
		undoStack.push(new AddCommand(restoredTask));
	}
	
	/*
	 * Push an edit command that undo this edit command
	 */
	public void prepareUndoEdit(ReadOnlyTask original, String dataType, ReadOnlyTask toEdit) {
		undoStack.push(new EditCommand(toEdit, dataType, original));
	}
	
	/*
	 * Push a restore command that undo this clear command
	 */
	public void prepareUndoClear(String dataType) {
		undoStack.push(new RestoreListCommand(dataType));
	}
	
	public void prepareUndoDone(String dataType, int index) {
		undoStack.push(new UndoneCommand(dataType,index));
	}
	
	public void executeUndo() {
		Command undoCommand = undoStack.pop();
    	undoCommand.setData(model, null);
    	undoCommand.execute();
	}
}
```
